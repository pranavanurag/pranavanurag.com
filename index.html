<html>

<head>
	<title>Pranav Anurag</title>
	<meta charset="utf-8">
</head>

<body>
	<br>
	<h1>Pranav Anurag</h1>
	<div class="buffer1"></div>
	<div class="gallery">
		<div class="current-focus"></div>
		<div class="buffer2"></div>
		<div class="thumbs"></div>
	</div>

</body>

<style>
	h1 {
		text-align: center;
	}

	body {
		width: 600px;
		height: 1400px;
		margin: 0 auto;
		justify-content: center;
	}

	.buffer1 {
		height: 60px;
	}

	.buffer2 {
		height: 20px;
	}

	.gallery>.thumbs {
		display: flex;
		flex-wrap: wrap;
	}

	.gallery>.thumbs>div>img {
		width: 150;
		height: 100px;
	}
</style>

<script>
	function shuffle(array) {
		let currentIndex = array.length, randomIndex;
		while (currentIndex != 0) {
			randomIndex = Math.floor(Math.random() * currentIndex);
			currentIndex--;
			[array[currentIndex], array[randomIndex]] = [
				array[randomIndex], array[currentIndex]];
		}
		return array;
	}
	let captions = {
		"rhino": "The Great Indian Rhino at Kaziranga National Park, Assam",
		"forest": "On the way to Duchess Falls, Pachmarhi",
		"birb": "Painted Stork, Keoladeo National Park, Bharatpur",
		"kanheri": "Kanheri Caves, Mumbai",
		"canyon": "Grand Canyon, Arizona, USA",
		"sanchi": "Buddha statue at Sanchi, Madhya Pradesh",
		"antcanyon": "Antelope Canyon, Arizona, USA",
		"guwahati": "Autos, and inside them - Guwahati, Assam"
	}

	function getImage(imagePost, width, height) {
		var image = document.createElement('img');
		image.setAttribute("src", imagePost.thumb_src);
		image.setAttribute("data-full-size-src", imagePost.full_src);
		image.setAttribute("alt", imagePost.caption);
		image.setAttribute("width", width);
		image.setAttribute("height", height);

		let className = "thumb-img-" + imagePost.id;
		image.classList.add(className);

		return image;
	}

	function getImageLarge(imagePost) {
		var image = getImage(imagePost, 600, 400);
		// todo clean this shit
		image.setAttribute("src", image.getAttribute("data-full-size-src"));
		return image;
	}

	function getImageThumbnail(imagePost) {
		return getImage(imagePost, 150, 100);
	}

	function getTextPostThumbnail(textPost) {
		var textPost = document.createElement('p');
		textPost.innerHTML = "hello world!";
		return textPost;
	}

	function renderThumbnails(posts) {
		var thumbsDiv = document.querySelector('.thumbs');

		posts.forEach((post) => {
			// all posts are images for now
			thumbsDiv.appendChild(getImageThumbnail(post));
		});
	}

	function renderFocus(post) {
		var currentFocusDiv = document.querySelector('.current-focus');
		// all posts are images for now
		currentFocusDiv.appendChild(getImageLarge(post));
	}

	var imagePostIds = ["rhino", "guwahati", "forest", "birb", "kanheri", "canyon", "sanchi", "antcanyon"];
	var imagePosts = [];
	for (var i = 0; i < imagePostIds.length; i++) {
		postId = imagePostIds[i];
		var image = {};
		image['thumb_src'] = "static/" + postId + "_thumb.jpeg";
		image['full_src'] = "static/" + postId + ".jpeg";
		image['caption'] = captions[postId];
		// console.log('created new image post object from image id = ', postId, 'image = ', post);
		imagePosts.push(image);
	}
	imagePosts = shuffle(imagePosts);
	renderFocus(imagePosts[0]);
	renderThumbnails(imagePosts);

	var thumbsDiv = document.querySelector('.thumbs');
	var thumbImages = thumbsDiv.children;
	for (var i = 0; i < thumbImages.length; i++) {
		var thumbImageDiv = thumbImages.item(i);
		thumbImageDiv.onclick = function () {
			thumbImage = event.target;

			var focusDiv = document.querySelector('.current-focus');
			var focusImage = focusDiv.children.item(0);

			focusImage.setAttribute('alt', thumbImage.getAttribute('alt'));
			focusImage.setAttribute('alt', thumbImage.getAttribute('alt'));
			focusImage.setAttribute('alt', thumbImage.getAttribute('alt'));
			focusImage.setAttribute('src', '');
			focusImage.setAttribute('src', thumbImage.getAttribute('data-full-size-src'));

			focusDiv.classList.forEach((x, i) => {
				if (x === "current-focus") return;
				focusDiv.classList.remove(x);
			})

		}
	}

</script>

</html>